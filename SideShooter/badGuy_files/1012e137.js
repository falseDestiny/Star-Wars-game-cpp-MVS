define("ajax.helper",["require","exports"],function(n,t){function i(n){var r=keyMap[n]?keyMap[n]:keyMap.Prefix+n,i=document.getElementById(r),t;return!i&&document.getElementsByClassName&&(t=document.getElementsByClassName(r),i=t&&t.length?t[0]:null),i}function r(n){var u=sj_ce("a"),t,i,r;return u.href=n,t=u.pathname,t[0]!=="/"&&(t="/"+t),i="",t==="/"?i=t:(r=n.indexOf(t),i=r>-1?n.substr(r):""),i}function u(n,t,i){for(;n&&n!==document;n=n.parentNode){if(n[t]===i)return n;if(n===undefined)break}}t.getPlaceholder=i;t.getRelativeUrl=r;t.getParentContainer=u});define("ajax.cache.mm",["require","exports","event.custom","dom"],function(n,t,i,r){function a(n,t){s[n]=t}function v(n,t,i,r){if(n>=0){var u=p(n);switch(t){case"Script":u.ScriptHolder.push(r);break;case"Style":u.Style+=r;break;case"EOS":u.Script=u.ScriptHolder;delete u.ScriptHolder;u[t]=r;c(i,u);break;default:u[t]=r}}}function y(n){var t=sessionStorage.getItem(e+n);return t?JSON.parse(t):null}function c(n,t){var i=sessionStorage.getItem(h+n);i=i?parseInt(i)+1:1;sessionStorage.setItem(h+n,i);(u!="/search"||i>1)&&(sessionStorage.setItem(e+n,JSON.stringify(t)),f[u]&&s[u]&&(f[u].push(n),f[u].length>s[u]&&(sessionStorage.removeItem(f[u][0]),f[u].shift())));t={}}function p(n){while(n>=o.length)o.push({Style:"",SearchForm:"",Content:"",ScriptHolder:[]});return o[n]}function l(){var s,f,o,h,n,t,a;for(s in sessionStorage)s.indexOf(e)===0&&sessionStorage.removeItem(s);var v="",y=document.body.getElementsByTagName("style"),p=r.getCssHolder();for(n=0;n<y.length;n++)f=y[n],f.hasAttribute("data-rms")||(v+=f.outerHTML,p.appendChild(f));for(o=[],h=document.body.getElementsByTagName("script"),n=0;n<h.length;n++)t=h[n],t.hasAttribute("data-rms")||(t.text.length>0?o.push({Content:t.text}):t.src.length>0&&o.push({Content:t.src,Method:"reference"}));a=window.location.href.substr(window.location.href.indexOf(u));c(a,{Style:v,SearchForm:_G.SRF,Content:_G.CNT,Script:o,IG:_G.IG,Title:document.title,Url:a,EOS:1});i.unbind("onP1",l)}var u=location.pathname,h="bingc#",e="bing#",o=[],s={},f={"/videos/search":[],"/images/search":[]};t.setQuota=a;t.cacheItem=v;t.fetch=y;i.bind("onP1",l,!0)});define("ajax.history.mm",["require","exports","event.custom"],function(n,t,i){function f(n){history.pushState(r,r,n)}function e(n){history.replaceState(r,r,n)}function o(){var n=window.location.href.substr(window.location.href.indexOf(u));i.fire("ajax.state",n)}var u=location.pathname,r="";t.pushState=f;t.replaceState=e;window.addEventListener("popstate",o,!1)});define("ajax.framework.mm",["require","exports","env","shared","event.custom","event.native","dom","cookies","rmsajax","ajax.cache.mm","ajax.history.mm","ajax.helper"],function(n,t,i,r,u,f,e,o,s,h,c,l){function pi(n){for(var t=0;t<b.length;t++)if(b[t]===n)return;b.push(n)}function wi(n){et=n}function bi(n){ot=n}function ki(n){st=n}function di(n){w=n}function pt(){window.keyMap&&_w.JSON&&document.getElementsByClassName&&rt&&(ct=o.get("SRCHHPGUSR","AS"),wt(),u.bind("ajax.state",cr),f.bind(document,"keydown",function(n){n.keyCode===27&&r.preventDefault(n)}),gi(),u.fire("ajaxReady"));rt||ht(" ",vi);u.unbind("onP1",pt)}function wt(){u.bind("ErrorInstrumentation",function(){bt()});var n=document.getElementById("sb_form");ct==="0"?f.bind(n,"submit",ii):n.submit=ii;document.onclick=nr;window.sj_lc=function(n){lr(n,3)}}function bt(){o.set("_SS","h5comp","0",!1,"/")}function gi(){var n=document.createElement("style"),t;n.setAttribute("data-rms","1");t="#"+y+"{position:absolute;background-color:white;opacity:0.6;z-index:10}";t+="a,a *{-ms-touch-action:manipulation;touch-action:manipulation}";n.textContent!==nt?n.textContent=t:n.styleSheet.cssText+=t;document.body.appendChild(n)}function nr(n){var r,t;if(!n.defaultPrevented&&!n.ctrlKey&&!n.shiftKey&&n.button!==2&&n.button!=1&&(r=n.target,t=l.getParentContainer(r,"tagName","A"),t&&(t.target==="_self"||!t.target))){var u=t.pathname,f=t.hostname?t.hostname:location.hostname,i=t.href;if(i=i.replace(ei,""),i&&(t.href=i),w&&w(t))return;f===location.hostname&&u.indexOf(d)===0&&(i=k(i.substr(i.indexOf(d))),i!==k(g)&&(it(i,1,r),n.preventDefault()))}}function kt(n,t,i){var e,r,u,f;i!==lt&&(e=new Date-at,lt=i);for(r in n)if(r==="Script")for(u=0;u<n[r].length;u++)f=n[r][u],dt(t,r,i,f);else dt(t,r,i,n[r])}function dt(n,t,i,r){for(var f=!1,u=0;u<b.length;u++)if(b[u](n,t,i,r,p)){f=!0;break}f||gt(n,t,i,r);h.cacheItem(n,t,i,r)}function gt(n,t,i,r){var f,u;if(i===g)switch(t){case"Script":r.Method==="reference"?e.includeScriptReference(r.Content):e.includeScript(r.Content);break;case"Style":ar();e.getCssHolder().innerHTML+="<div><\/div>"+r;break;case"IG":_G.IG=r;break;case"Title":document.title=r;break;case"EOS":tr();wt();vr();hr(i);or();break;case"HBop":f=document.createElement("div");document.getElementById(keyMap.Content).appendChild(f);f.outerHTML=r;break;case"RmsDefer":u=l.getPlaceholder(t);u||(u=document.createElement("div"),document.body.appendChild(u));u.outerHTML=r;break;case"Content":ni(t,r);tt!==null&&(sb_ct(tt),tt=null);break;default:ni(t,r)}}function ni(n,t){var i=l.getPlaceholder(n);i&&(i.outerHTML=t)}function tr(){_G.PPS=!1;si_PP(new Date)}function ir(){u.fire("ajax.unload");i.clear();r.forEach(ri,function(n){window.hasOwnProperty(n)&&(window[n]=nt,delete window[n])});r.forEach(ui,function(n){for(var i,r=document.getElementsByClassName(n),t=0;t<r.length;t++)i=r[t],i.parentNode.removeChild(i)});wr();u.reset();s.reset()}function rr(){var n=l.getPlaceholder("AutoSug"),t=l.getPlaceholder("SearchForm"),i=l.getPlaceholder("header");n&&t&&i&&(n.style.display="none",t.className="",i.className="")}function ur(n){var i,u;if(rr(),i=st?st(n):document.getElementById(keyMap.Content),i){var t=i.getBoundingClientRect(),f=t.width===nt?Math.abs(t.right-t.left):t.width,e=fr(i,"paddingLeft");f=f-(e?parseInt(e):0);var s=t.height===nt?Math.abs(t.bottom-t.top):t.height,o="px",r=document.getElementById(y);r||(r=document.createElement("div"),r.setAttribute("id",y));r.style.height=s+o;r.style.width=f+o;u=i.childNodes;u&&u.length&&i.insertBefore(r,u[0])}}function fr(n,t){var i;if(window.getComputedStyle)i=getComputedStyle(n,null);else if(n.currentStyle)i=n.currentStyle;else return null;return i[t]}function er(){var n=document.getElementById(y);n&&n.parentNode.removeChild(n)}function or(){u.fire("ajax.load");u.fire("onHTML");u.fire("onPP");u.fire("onP1Lazy");u.fire("ajax.postload");try{window.scrollTo(0,0)}catch(n){}er()}function it(n,t,i){v=si;try{g=n;p=t;ut=!0;ir();v=hi;sr(n,t,i)}catch(u){var f=v===vt&&!document.getElementById(y)?!1:!0,r=""+u;f?ti(n,r,v,t):ht(r,v)}}function sr(n,r,u){var o,f,s,e,c;ft.indexOf(n)===-1&&(t.enableLocalCache&&r===2&&(o=h.fetch(n))?(v=vt,kt(o,-1,n)):(f=window.AjaxCB.length,v=ci,ft.push(n),s=n+"&sid="+rt+"&format=snrjson&jsoncbid="+f,a&&a.parentNode&&a.parentNode.removeChild(a),a=document.createElement("iframe"),a.style.display="none",document.body.appendChild(a),window.AjaxCB.push(function(t){kt(t,f,n)}),at=new Date,e=function(t,i){return function(){document.getElementById(y)&&ti(n,"FailedRequest",t,i)}},a.onload=e(yt,p),c=window.location.protocol+"//"+window.location.host+s,a.contentWindow.location.assign(c),tt=i.setTimeout(e(ai,p),t.timeout),v=li,ur(u)))}function ti(n,t,r,u){ht(t,r);n=n+yi+r;var f="assign";u===2&&(f="replace");i.setTimeout(function(){return window.location[f](n)},fi)}function ht(n,t){if(t<yt&&typeof onerror=="function")window.onerror(n,"Ajax.Bundle.MM",t);else sj_log("CI.Error","Ajax.MM",n+t),bt()}function hr(n){p!==2&&c.pushState(n);ft=[]}function cr(n){if(n&&n.length>1){var t=k(n[1]),i=k(g);if(et!=null&&et(t,i))return;t&&t!==i&&it(t,2)}}function lr(n,t){var i=l.getRelativeUrl(n);i.indexOf(d)===0&&(ot==null||ot(n))?(i=k(i),it(i,t)):window.location.assign(n)}function k(n){if(!n)return n;var t=n.indexOf("#");return t===-1?n:n.substring(0,t)}function ar(){var n,i,t;ut&&(n=e.getCssHolder(),n.id="ajaxStylesBackup",i=e.getCssHolder(),t=n.nextSibling,t&&n.parentNode.insertBefore(i,t),ut=!1)}function vr(){var n=document.getElementById("ajaxStylesBackup");n&&n.parentNode.removeChild(n)}function yr(n,t){var i=t&&t.action?t.action:d;return l.getRelativeUrl(i)+"?q="+encodeURIComponent(n)}function pr(n){for(var r="",i=n.getElementsByTagName("input"),t=0;t<i.length;t++)i[t].type==="hidden"&&(r+="&"+i[t].name+"="+encodeURIComponent(i[t].value));return r}function ii(n){var t=document.getElementById(keyMap.SearchForm),f=document.getElementById(keyMap.SBoxId),u=f.value,i;if(oi.test(u)){if(i=yr(u,t)+pr(t),w&&w(null,t,i))return;r.preventDefault(n);it(i,3)}}function wr(){var n=document.getElementById(keyMap.Notification),t;n&&(n.parentNode.removeChild(n),t=document.getElementById("id_h"),t&&(t.style.top="0"))}(function(n){n[n.click=1]="click";n[n.history=2]="history";n[n.as=3]="as"})(t.Origin||(t.Origin={}));var br=t.Origin,a=null,d=location.pathname,rt=_G.SID,ut=!1,p=1,g=l.getRelativeUrl(window.location.href),ft=[],ri=["Bnp","RMS_IACL","sched","TP","bepns","Identity","initComCtrl","ccal","ccal_bundle"],ui=["bubblePlaceholder","irhc","vrhc"],y="ajaxMaskLayer",nt,tt=null;t.enableLocalCache=!0;t.timeout=1e4;var fi=30,ei=/(&|%26)sid(=|%3d)\w+(&|%26)format(=|%3d)snrjson(&|%26)jsoncbid(=|%3d)\d+/gm,oi=/\S/,ct,kr=sj_ce("div"),lt,at=si_ST,v,si=10,hi=20,ci=30,li=40,vt=50,yt=60,ai=70,vi=90,yi="&ajf=",et=null,ot=null,st=null,w=null,b=[];t.registerRenderCallback=pi;t.setHistoryChangeCallback=wi;t.setLocationChangeCallback=bi;t.setContentMaskCallback=ki;t.setBeforeLoadCallback=di;t.renderItem=gt;u.bind("onP1",pt,!0);window.AjaxCB=[]});define("ajax.render.mm",["require","exports","event.custom","ajax.framework.mm","dom","ajax.cache.mm","ajax.helper"],function(n,t,i,r,u,f,e){function a(n){for(var i=0,t=0;t<o.length;t++)if(o[t].url.indexOf(n)>-1){i=o[t].pos;break}return i}function b(n,t,i,f,e){var c=!1,o;switch(t){case"EOS":h=i;r.renderItem(n,t,i,f);e==2?(s=a(i),o="if(typeof (VideoDenseResult) != 'undefined') VideoDenseResult.init("+s+")",u.includeScript(o),o="LateLoad.updateImages()",u.includeScript(o)):(o="if(typeof (VideoDenseResult) != 'undefined') VideoDenseResult.init(0)",u.includeScript(o));c=!0}return c}function k(n,t,i,f,e){var c=!1,o;switch(t){case"EOS":h=i;r.renderItem(n,t,i,f);v(i)||(e==2?(s=a(i),o="if(typeof (ImageDenseResult) != 'undefined') ImageDenseResult.init("+s+")",u.includeScript(o)):(o="if(typeof (ImageDenseResult) != 'undefined') ImageDenseResult.init(0)",u.includeScript(o)));c=!0}return c}function d(){if(c=="/images/search")r.registerRenderCallback(k);else if(c=="/videos/search")r.registerRenderCallback(b);else return;r.enableLocalCache=!1;r.timeout=keyMap.Timeout;r.setHistoryChangeCallback(tt);r.setLocationChangeCallback(it);r.setContentMaskCallback(rt);r.setBeforeLoadCallback(nt)}function l(n,t){return t&&y(t)&&(p(t)||!n||!y(n)||p(n))?!1:!0}function v(n){return n.match(/\/images\/search.*[?&]view=detailv2\b/i)!=null}function y(n){return n.match(/\/videos\/search.*[?&]view=detail\b/i)!=null}function p(n){return/\?.+\bvrth=1\b/.test(n)}function g(n){return n&&n.getAttribute("data-ajax-allowed")==="1"}function nt(n,t,i){var r=!1,u=t?t.target:null,f;return u=="_blank"||u=="_parent"?(_w.open(i,u),r=!0):(f=n?e.getParentContainer(n,"tagName","A"):null,l(f?f.href:null,window.location.href)?n&&!v(window.location.href)?e.getParentContainer(n,"className","dg_u")===undefined||g(n)||(r=!0):typeof DgConfig=="undefined"&&(r=!0):r=!0,r&&i&&window.location.assign(i)),r}function tt(n,t){var i=!1;return(n.indexOf("#view=detail")>-1||w(n)||w(t)||!l(n,t))&&(i=!0),i}function w(n){return n&&n.indexOf("ajaxhist=0")>-1}function it(n){return l(n,window.location.href)}function rt(n){if(n&&e.getParentContainer(n,"id","mmvm_car")!==undefined)return document.getElementById(keyMap.VideoMaskContent);var t=document.getElementById(keyMap.ImageDetailMaskContent);return t?t:document.getElementById(keyMap.Content)}function ut(){s=_w.pageYOffset||Math.max(sb_de.scrollTop,sj_b.scrollTop)}function ft(){h===undefined&&(h=window.location.href.substr(window.location.href.indexOf(c)));for(var n=0;n<o.length;n++)if(o[n].url==h){o[n].pos=s;break}n==o.length&&o.push({url:h,pos:s})}var c=location.pathname,o=[],s=0,h;f.setQuota(c,10);i.bind("onP1",d,!0);i.bind("ajax.unload",ft,!0);sj_be(_w,"scroll",ut)})