var AsyncFetcher,ImageDetailV2,NavigationEventType,NavigationDirection,InsightsStatus,MainWindowFocusStatus,DetailPageEvent,InsightsFetcher,ImageDetailDataManager,ImageDetailFilmstrip,ImageDetailMainImage,ImageViewerDls,ImageViewerHighlights,ImageVisionFetcher,ImageInsightsVision;(function(n){function t(n,t,r,u){if(!n||!t)throw"no async url or no reponse processor";var f=sj_gx();return f?(f.onreadystatechange=function(){4==f.readyState&&i(n,f,t,r,u)},f.open("GET",n,!0),f.send(null),f):(r&&r(n),null)}function i(n,t,i,r,u){var f=t.responseText;200==t.status&&f!=""?i(f,n):200==t.status&&u?u(n):r&&r(n)}n.fetch=t})(AsyncFetcher||(AsyncFetcher={})),function(n){function rt(){if(i=_ge("detail_img"),w=_ge("detail_main"),y=_ge("detail_meta"),l=_ge("insights"),t.rdc("cbtn",_d.body),i&&w){_w.si_PP(new Date);vt();pt();r=Math.max(sb_de.clientHeight-c,e);o=r-e;f=0;k();yt();g();wt();var n=Bing.Location.getHash();(l&&l.firstChild||n&&n.toLowerCase().indexOf("enterinsights"))&&_w.scrollTo(0,o)}}function ut(){location.search.indexOf("view=detailv2")===-1&&location.reload()}function vt(){var n=typeof IDConfig!="undefined"&&IDConfig?IDConfig:null,t=n&&n.mh?n.mh:600;c=ft();e=t-c;b=n&&n.dmip?n.dmip:!1;tt=n&&n.mw?n.mw:600}function yt(){if(i){var n=t.gcs(i);s.width=n&&n.maxWidth?parseInt(n.maxWidth):0;s.height=n&&n.maxHeight?parseInt(n.maxHeight):0}}function ft(){var i=0,u=_ge("miniheader"),f=_ge("detail_film"),n,r;return i+=u?t.goh(u):0,i+=f?t.goh(f):0,n=0,typeof IDConfig!="undefined"&&IDConfig&&IDConfig.mbh&&(n=IDConfig.mbh),n==0&&(r=_ge("detail_meta"),n=r?t.goh(r):0),i+n}function pt(){h=_ge("switcher");a=_ge("isb");h&&a&&sj_be(h,"click",et)}function wt(){sj_evt.bind(3,ot);sj_evt.bind(1,st);sj_be(_w,"scroll",k);sj_be(_w,"resize",g);sj_be(_w,"popstate",ut);sj_be(_w,"unload",p);sj_evt.bind("ajax.unload",p)}function p(){sj_evt.unbind(1,st);sj_evt.unbind(3,ot);h&&a&&sj_ue(h,"click",et);sj_ue(_w,"scroll",k);sj_ue(_w,"resize",g);sj_ue(_w,"popstate",ut);sj_ue(_w,"unload",p);sj_evt.unbind("ajax.unload",p);_w.scrollTo(0,f)}function k(){var n=GetScrollTop();n!=f&&(b||(n<o?(t.smh(i,r-n),t.sh(i,r-n),d()):f<o&&(t.smh(i,e),t.sh(i,e),d())),n-f>0&&n>it?dt():n<=it&&gt(),bt(),kt(),f=n)}function d(){var n=i.id;n&&(i.id="",i.id=n)}function et(){v=!0;sj_evt.fire(3)}function ot(){u==0?nt.scroll(20,0,0,0,o):nt.scroll(20,0,0,f,0)}function bt(){if(y){var n="expand";u==1?t.ac(y,n):t.rc(y,n)}}function kt(){h&&(u==1?t.str(a,180):t.str(a,0))}function dt(){if(u==0){u=1;sj_evt.fire(0,1);var n=lt();v&&(v=!1,n&&ht(n,NavigationEventType.Click,"imageviewer","highlights","expand"));ct(u,n)}}function gt(){if(u==1){u=0;sj_evt.fire(0,0);var n=lt();v&&(v=!1,n&&ht(n,NavigationEventType.Click,"imageviewer","highlights","fold"));ct(u,n)}}function g(){var h=sb_de.clientHeight,u,n;c=ft();r=Math.max(h-c,e);r!=s.height&&(o=r-e,t.sh(w,r),u=b?r:Math.max(r-f,e),t.smh(i,u),t.sh(i,u),d(),s.height=r);n=Math.max(sb_de.clientWidth,tt);n&&n!=s.width&&(t.smw(i,n),s.width=n);l&&t.ss(l,"minHeight",Math.max(sb_de.clientHeight-c-e,at)+"px")}function st(){u==1&&f>o&&_w.scrollTo(0,o)}function ht(n,t,i,r,u){pInstr.logEvent(n.ns,t.name,n.key,i,{Meta:r,Mid:n.mid,Direction:u},null)}function ct(n,t){var i="images",r=null,u;t&&(i=t.ns,r=t.key);u=n==1?"CI.Show":"CI.Hide";pInstr.logEvent(i,u,r,"imageinsights",null,null)}function lt(){var n=null;return typeof ImageDetailDataManager!="undefined"&&(n=ImageDetailDataManager.getCurrentMetaData()),n}var t=pMMUtils,nt=MMAnim,i,w,y,l,s={width:0,height:0},u=0,f=0,h,a,o,c=0,r,e=300,tt,at=300,it=5,v,b=!0;n.init=rt;rt()}(ImageDetailV2||(ImageDetailV2={}));NavigationEventType={Click:{name:"CI.Click"},FilmStripSwipe:{name:"CI.Scroll"},Swipe:{name:"CI.Scroll"},AutoPlay:{name:"CI.AutoClick"}},function(n){n[n.Previous=0]="Previous";n[n.Next=1]="Next"}(NavigationDirection||(NavigationDirection={})),function(n){n[n.Fold=0]="Fold";n[n.Expand=1]="Expand"}(InsightsStatus||(InsightsStatus={})),function(n){n[n.Focus=0]="Focus";n[n.Blur=1]="Blur"}(MainWindowFocusStatus||(MainWindowFocusStatus={})),function(n){n[n.StatusChange=0]="StatusChange";n[n.ActiveIndexChange=1]="ActiveIndexChange";n[n.MoreResultsLoaded=2]="MoreResultsLoaded";n[n.SwitchInsights=3]="SwitchInsights";n[n.ActiveItemChange=4]="ActiveItemChange";n[n.MainImageLoaded=5]="MainImageLoaded";n[n.AnimationStateChange=6]="AnimationStateChange";n[n.Navigation=7]="Navigation";n[n.MainWindowFocusChange=8]="MainWindowFocusChange";n[n.ToolTipAppeared=9]="ToolTipAppeared";n[n.InsightsLoaded=10]="InsightsLoaded";n[n.MainImageClick=11]="MainImageClick";n[n.PageLoaded=12]="PageLoaded";n[n.InsightsUpdated=13]="InsightsUpdated";n[n.ShowFullCaption=14]="ShowFullCaption"}(DetailPageEvent||(DetailPageEvent={})),function(n){function o(n,t,i,r,u){return AsyncFetcher.fetch(s(n,t),i,function(n){h(n,t);typeof r!="undefined"&&r&&r(n)},function(n){typeof u!="undefined"&&u?u(n):typeof r!="undefined"&&r&&r(n)})}function s(n,o){var s=o?f:u,c,l,h,a,v;s||(t=_w.IIConfig,s=r(o));s=s.replace(/%SFX%/,String(++e));for(c in n)l=o?c+"s":c,h=n[c],h!==null&&(typeof h=="undefined"&&(h=""),s+="&"+l+"="+encodeURIComponent(h));return i&&(a=o?n.mid.split(",")[0]:n.mid,s=!o&&(v=i.qsv("insightsbag"))?i.stb(s,v):i.atb(s,(o?"InsightsBatchMock_":"InsightsMock_")+a)),s}function r(n){var i;return i=n?t&&t.baut?t.baut:"":t&&t.aut?t.aut:"",addCommonPersistedParams(i)}function h(n,t){var i={};i.Name=t?"imageinsightsbatch":"imageinsights";i.T="CI.Error";i.TS=sb_gt();i.AppNS=_G.P;i.URL=n;pInstr.icd(i)}var i=typeof MMTestUtils!="undefined"?MMTestUtils:null,t=_w.IIConfig,u=r(!1),f=r(!0),e=0;n.fetch=o}(InsightsFetcher||(InsightsFetcher={})),function(n){function wt(){typeof IIConfig!="undefined"&&IIConfig&&IIConfig.ie&&(o=IIConfig.ie);b=[].slice.call(t.gebc(lt,_d));k=[].slice.call(t.gebc(ut,_d));sj_evt.bind(7,st);o&&sj_evt.bind(4,ct);sj_be(_w,"unload",l);sj_evt.bind("ajax.unload",l);var n=parseInt(pMMUtils.qsv("selectedIndex",!0));u=isNaN(n)?0:n}function l(){sj_evt.unbind(7,st);o&&sj_evt.unbind(4,ct);sj_ue(_w,"unload",l);sj_evt.unbind("ajax.unload",l)}function a(n,t,i){var r=i?gt(n):s(n),u,f,e;return r&&t&&(u=g(r),u&&(r[at]=u),f=ni(r),e="brq",f&&typeof r[e]=="undefined"&&(r.brq=f[e])),r}function d(){return c||(c=a(u)),c}function bt(n){var t=a(n),i=t?t.cidx:null;return typeof i=="number"?i:n}function kt(n,t){var i=s(n);i&&!i[et]&&(i[et]=t)}function dt(n){var s,f,e,h;if(typeof n=="undefined"&&(n=!1),s=_ge("ivd"),f=s?t.ga(s,"json-data"):null,f&&f.length>0){f=decodeURIComponent(f.replace(/\+/g,"%20"));try{e=JSON.parse(f)}catch(c){e=eval("("+f+")")}e&&e[rt]&&(ti(e[rt],n),ii(e[pt]),sj_evt.fire(2,i,r));t.r(s.parentNode,s)}o&&(h=u,tt(h,function(n,t){v(n);y(h,t)},function(n){y(h,n)}))}function v(n){var l=sj_ce("div"),r,u,i,f,o,s,c;if(l.innerHTML=n,r=t.gebc(ut,l),r)for(u=0;u<r.length;u++)(i=t.ga(r[u],vt),f=t.ga(r[u],w),i&&f)&&(e[i]||(e[i]={}),o=e[i],o[f]||(o[f]=r[u].innerHTML),s=t.ga(r[u],yt),s&&(h[i]||(h[i]={}),c=h[i],c[f]||(c[f]=s)))}function s(n){if(n>=i)while(n<=r){var t=f[n];if(t)return t;n++}return null}function gt(n){if(n<=r)while(n>=i){var t=f[n];if(t)return t;n--}return null}function g(n){return ot(e,n)}function ni(n){return ot(h,n)}function ot(n,t){var i=t[ft];return i?n[i]:null}function st(t){var f=t[1],i,r,h,l,e,s;(i=typeof f.newIndex=="number"?f.newIndex:f.direction==1?u+1:u-1,r=n.getFullData(i,!1,i<u),r)&&(i=r.idx,h={newIndex:i,oldIndex:u,triggerType:f.eventType,component:f.source},u=i,c=r,ht(r),sj_evt.fire(1,h),o)&&(l=g(r),l?(nt(i),e=r[p]+it-1,s=n.getFullData(e,!0),s&&!s.insights&&tt(e,function(n){v(n)})):tt(i,function(n,t){v(n);y(i,t)},function(n){y(i,n)}))}function ht(n){for(var u,r,f,i=0;i<b.length;i++)u=b[i],r=t.ga(u,w),r&&(f="",n[r]&&(f=n[r]),u.innerHTML=f)}function y(n,t){var i=d();i&&i.mid&&t.indexOf(i.mid)>=0&&nt(n)}function nt(n){var t=a(n,!0),i={index:n,resultData:t};sj_evt.fire(4,i)}function ct(n){var i=n[1],s,f,r,e,o,h,c,l;if(i!=null&&i.resultData!=null&&i.resultData.insights!=null&&i.index==u)for(s=i.resultData.insights,f=0;f<k.length;f++)r=k[f],e=t.ga(r,w),e&&(o="",s[e]&&(o=s[e]),h=r.firstChild,h&&r.removeChild(h),o&&(c=sj_ce("div"),c.innerHTML=o,l=c.firstChild,l&&r.appendChild(l))),sj_evt.fire(13)}function tt(n,t,i){for(var u=[],h=[],c=0,f=n,r,o,l,a;c<it&&f!=null;)r=s(f),f=null,r&&(g(r)||(o=r[ft],o&&(u.push(o),e[o]={},l=r.ccid?r.ccid:"",h.push(l))),f=typeof r[p]!="undefined"?parseInt(r[p])+1:null),c++;u.length>0?(a={mid:u.join(","),cid:h.join(",")},InsightsFetcher.fetch(a,!0,function(n){t(n,u)},function(){i&&i(u)})):nt(n)}function ti(n,u){var o=[],l,h,p,c,a,e,v,w,y;for(l in n)n.hasOwnProperty(l)&&o.push(n[l]);for(u&&(o=o.reverse()),p=i==null||r==null,i!=null&&r!=null&&(h=u?s(i).cidx:s(r).cidx),c=0;c<o.length;c++)a=o[c],e=a.idx,f[e]||(f[e]=a,i==null||r==null?h=f[e].cidx=i=r=e:(f[e].cidx=u?--h:++h,i=i>e?e:i,r=r<e?e:r));v=t.qsv("iss",!0);w=v&&/^VS(I|P)$/i.test(v);p&&w&&(y=d(),y&&ht(y))}function ii(t){t&&(n.favData=t)}function ri(n){var u={},i,f,r;return n.insights&&n.insights&&n.insights.caption&&(i=sj_ce("div"),i.innerHTML=n.insights.caption,f=i?t.gebc("cap_items",i):[],f.length>0&&(u.content=f[0].textContent,r=i?t.gebc("cap_link",i):[],r&&r.length>0&&(u.source=r[0].textContent))),u}var e={},f={};n.favData;var h={},t=pMMUtils,i,r,it=5,o=!1,rt="web",lt="webAns",ut="insightsAns",ft="mid",p="idx",et="mainImg",at="insights",w="data-type",vt="data-id",yt="data-metadata",pt="ext",b,k,u,c;n.init=wt;n.getFullData=a;n.getCurrentMetaData=d;n.getContinuousIndex=bt;n.insertMainImage=kt;n.loadData=dt;n.loadInsightsData=v;n.getCaptionInfo=ri}(ImageDetailDataManager||(ImageDetailDataManager={}));ImageDetailDataManager.init(),function(){function h(){t=_ge("bar_l");i=_ge("bar_r");t&&i&&(r=parseInt(n.ga(t,"width")),u=parseInt(n.ga(i,"min-width")),r&&u&&(SmartEvent.bind(_w,"resize",s),o.bind(_w,"resize",s)));o.bindc(13,c)}function s(){var i=sb_de.clientWidth;i!=f&&(u+r>i?n.ac(t,e):n.rc(t,e));f=i}function c(){var t=_ge("brca"),r,i,u;t&&(r=n.gfbc("brq",t),r&&(i=r.hasChildNodes()?n.rc:n.ac,i(t,"emptybrq")),u=n.gfbc("caption",t),u&&(i=u.hasChildNodes()?n.rc:n.ac,i(t,"emptycaption")))}var f=sb_de.clientWidth,t,i,r,u,n=pMMUtils,e="wrap",o=SmartEvent;h()}(),function(n){function ct(){(e=_ge("detail_film"),e)&&(o=nt("iw",84),l=nt("hw",0),st=nt("ts",6),i=_ge("iol_fsc"),i&&(k=t.ga(i,"data-purl"),h=t.ga(i,"data-nurl")),li(),f().length>0?lt():i&&wi())}function f(){return i&&(ht=t.gebc("iol_fst",i)),ht}function lt(){ci();hi();ut()}function hi(){u=f()[r-y];u||(u=f()[0]);at();t.hc(u,p)||t.ac(u,p)}function ci(){var n=f();n&&(y=parseInt(t.ga(n[0],"idx"))||0,w=parseInt(t.ga(n[n.length-1],"idx"))||0)}function at(){var n,r,f,e;if(u&&l&&(n=u.parentNode,n&&(r=t.gebc("iol_grp",i),r))){for(f=0;f<r.length;f++)e=r[f],e!=n&&t.rc(e,tt);t.hc(n,tt)||t.ac(n,tt)}}function li(){sj_evt.bind(1,yt);sj_evt.bind(6,pt);sj_be(_w,"resize",ut);sj_be(e,"click",vt);s==null&&nt("esif",!1)&&typeof MMSwipe=="function"&&(s=new MMSwipe(i,e,null,di,ir));sj_be(_w,"unload",g);sj_evt.bind("ajax.unload",g)}function g(){sj_evt.unbind(1,yt);sj_evt.unbind(6,pt);sj_ue(_w,"resize",ut);sj_ue(e,"click",vt);s&&s.cu();sj_ue(_w,"unload",g);sj_evt.unbind("ajax.unload",g)}function vt(n){if(!rt){if(s&&s.im()){s.rsm();ei(n);return}var t=yi(n);t>=0&&t!=r&&bt(NavigationEventType.Click,t>r?1:0,t);ei(n)}}function yt(n){var t=n[1],i;r=t.newIndex;i=t.oldIndex;t.triggerType!=NavigationEventType.FilmStripSwipe&&vi(r,i);pi(r);at();kt()}function pt(n){rt=typeof n[1]=="boolean"?n[1]:!1}function ut(){ai();wt();kt()}function ai(){c=e.clientWidth/o;c=c%2==0?c+1:c}function wt(n){var c,u,s,a,h;typeof n=="undefined"&&(n=r);c=t.grtlsl(i);u=parseInt(t.ga(f()[0],"idx"));n=v(n);u=v(u);s=e.clientWidth/2-(n-u)*o-(o-st)/2;(a=f()[n])&&(h=a.parentNode,h&&(s-=t.ga(h,"idx")*l));ri(c,s)}function vi(n,r){var u,e;n=v(n);r=v(r);var h=t.grtlsl(i),a=(r-n)*o,c=0,s=f();s&&(u=s[r],e=s[n],u&&u.parentNode&&e&&e.parentNode&&(c=(t.ga(e.parentNode,"idx")-t.ga(u.parentNode,"idx"))*l));ri(h,h+a-c)}function yi(n){var i=-1,u=sj_et(n),r=t.gpc(u,si,oi);return r&&(i=parseInt(t.ga(r,"idx"))),i}function pi(n){var e=f(),o,i,r;e&&(o=t.ga(e[0],"idx"),o&&(i=parseInt(o),i=v(i),n=v(n),r=e[n-i],r&&(t.rc(u,p),t.ac(r,p),u=r)))}function bt(n,t,i){var r={eventType:n,direction:t,source:"filmstrip",newIndex:i};sj_evt.fire(7,r)}function kt(){var n=Math.ceil(c*1.5),t,i;k&&r-y<n&&(t=ft(k),y=-1e4,typeof AsyncFetcher!="undefined"&&AsyncFetcher&&AsyncFetcher.fetch&&AsyncFetcher.fetch(t,bi));h&&w-r<n&&(i=ft(h),w=1e4,typeof AsyncFetcher!="undefined"&&AsyncFetcher&&AsyncFetcher.fetch&&AsyncFetcher.fetch(i,dt,ti))}function wi(){if(typeof AsyncFetcher!="undefined"&&AsyncFetcher&&AsyncFetcher.fetch&&h){var n=ft(h);AsyncFetcher.fetch(n,ki,ti)}}function ft(n){if(n){var t=n.replace(/%SFX%/,String(++ot));return rr(t)}return null}function bi(n){var e=fi(n),r,u;gt(e)&&(ni(e,!0),r=e.firstChild,k=t.ga(r,"data-purl"),r.firstChild&&(t.ib(i,r.firstChild,i.firstChild),ii(r,!0),u=f(),u&&u.length>0&&(y=parseInt(t.ga(u[0],"idx"))||0)))}function dt(n){var e=fi(n),r,u;return gt(e)?(ni(e,!1),r=e.firstChild,h=t.ga(r,"data-nurl"),r.firstChild&&(t.a(i,r.firstChild),ii(r),u=f(),u&&u.length>0&&(w=parseInt(t.ga(u[u.length-1],"idx"))||0)),!0):!1}function ki(n){if(dt(n)){lt();var t={newIndex:r,eventType:NavigationEventType.FilmStripSwipe,direction:1};sj_evt.fire(7,t)}}function gt(n){for(var r=t.gebc("vtesthooks",n),i=r.length-1;i>=0;i--)t.r(n,r[i]);return n.childNodes.length==2&&t.ga(n.firstChild,"id")=="film"&&t.ga(n.lastChild,"id")=="ivd"}function ni(n,i){typeof ImageDetailDataManager!="undefined"&&ImageDetailDataManager.loadData&&(t.a(_ge("b_content"),n.lastChild),ImageDetailDataManager.loadData(i))}function ti(){h=null}function ii(n,r){var u,f,e;r===void 0&&(r=!1);u=parseInt(t.ga(n,"width"));f=parseInt(t.gcs(i).width);t.sw(i,f+u);r&&(e=t.grtlsl(i),ui(),t.rtlsl(i,e-u))}function di(n,r){t.hc(e,it)||t.ac(i,it);switch(b){case 0:rt||(b=t.gsd(r.X,r.Y,10,2.5));break;case 1:t.rtlsl(i,n+r.X);break;case 2:_w.scrollBy(0,-r.Y)}return!0}function gi(n,i){var e=f(),r,u;return e&&(r=e[n],u=e[i],r&&r.parentNode&&u&&u.parentNode)?(t.ga(u.parentNode,"idx")-t.ga(r.parentNode,"idx"))*l:0}function nr(n){for(var i,e,r=u,f=0;f<n;f++){if(i=r.nextSibling,i||(e=r.parentNode.nextSibling,e&&(i=e.firstChild,i&&l&&(t.hc(i,"iol_fst")||(i=i.nextSibling,++f),a=!0))),!i){a=!0;break}r=i}return t.hc(r,"iol_fst")||(r=r.nextSibling),r}function tr(n){for(var r,e,i=u,f=0;f<n;f++){if(r=i.previousSibling,r||(e=i.parentNode.previousSibling,e&&(r=e.lastChild,a=!0,++f)),!r){a=!0;break}i=r}return t.hc(i,"iol_fst")||(i=i.nextSibling),i}function ir(n,u){var f;if(b==1){f=Math.round(u.X/o);a=!1;var s=f>0?tr(f):nr(-f),h=a,e=parseInt(t.ga(s,"idx"))||0;t.rtlsl(i,n+f*o-gi(r,e));(h||e==r)&&wt(e);t.rc(i,it);bt(NavigationEventType.FilmStripSwipe,f>0?0:1,e)}return b=0,!0}function ri(n,r){typeof MMAnim!="undefined"&&MMAnim.transition?(ui(),sj_evt.fire(6,!0),d=MMAnim.transition(i,20,t.rtlsl,n,r,null,function(){sj_evt.fire(6,!1)})):t.rtlsl(i,r)}function ui(){d&&(d.stop(),d=null,sj_evt.fire(6,!1))}function fi(n){var t=sj_ce("div");return t.innerHTML=n,t}function ei(n){sj_pd(n);sj_sp(n)}function nt(n,t){return typeof FSConfig!="undefined"&&FSConfig&&FSConfig[n]?FSConfig[n]:t}function rr(n){return et?et.atb(n,"FS_"+String(ot)):n}function v(n){var t=n;return typeof ImageDetailDataManager!="undefined"&&(t=ImageDetailDataManager.getContinuousIndex(n)),t}var t=pMMUtils,et=typeof MMTestUtils!="undefined"?MMTestUtils:null,r=parseInt(t.qsv("selectedIndex",!0))||0,e,i,u,oi="iol_fst",p="iol_fsst",tt="iol_grp_sel",it="swiping",si="A",c,ot=0,y,w,o,l=0,st,s=null,b=0,rt=!1,a=!1,k=null,h=null,ht=[],d=null;n.init=ct;ct()}(ImageDetailFilmstrip||(ImageDetailFilmstrip={})),function(n){function er(){SmartEvent.bindc(1,sr);SmartEvent.bindc(2,hr);SmartEvent.bindc(6,cr);SmartEvent.bind(k,y,lr);SmartEvent.bind(d,y,ar);SmartEvent.bind(ti,y,vr);SmartEvent.bind(b,y,pr);SmartEvent.bind(_d,nr,kr);SmartEvent.bind(_w,"resize",hi);SmartEvent.bind(_w,"scroll",hi);bt&&SmartEvent.bind(ri,y,yr);typeof IDConfig!="undefined"&&IDConfig.esim&&typeof MMSwipe=="function"&&(nt=new MMSwipe(i.parentElement,null,null,fu,eu));SmartEvent.bindc(SearchBoxEvent[0],or);SmartEvent.bindc(DetailPageEvent[8],function(n){n.length>1&&(oi=n[1])})}function or(n){var t=n[1];typeof t!="undefined"&&(st=t)}function sr(n){ot=-1;var t=n[1];r=t.newIndex;Math.abs(t.newIndex-t.oldIndex)<=1?dr(t.newIndex<t.oldIndex):nu();bi();li();ai()}function hr(n){h=typeof n[1]=="number"?n[1]:h;c=typeof n[2]=="number"?n[2]:c;li();ai();dt()}function cr(n){it=typeof n[1]=="boolean"?n[1]:!1}function lr(n){si(n,0)}function ar(n){si(n,1)}function si(n,t){if(!it){var i=sj_et(n);rt(NavigationEventType.Click,t);w(n)}}function vr(n){var f=sj_et(n),i=t.ga(f,"href");i&&(_w.open(i,"_blank"),ft(u(r),"mainimage","learnmore"));w(n)}function yr(){kt(ui,{})}function pr(n){var f,i;if(oi!=1){if(nt&&nt.im()){nt.rsm();w(n);return}f=sj_et(n);t.hc(f,"mainImage")&&(i=u(r),i&&i.imgUrl&&(typeof MalwareWarning!="undefined"&&i.ismw?(w(n),MalwareWarning.show(i.imgUrl)):(w(n),sj_evt.fire(11,i))))}}function wr(n){br(n.pageUrl)?_w.open(n.pageUrl,"_blank"):_w.open(n.imgUrl,"_blank");ft(n,"mainimage","mainimage")}function br(n){try{if(n&&typeof IIConfig!="undefined"&&IIConfig&&IIConfig.vpreg){var t=new RegExp(IIConfig.vpreg,"i");return t.test(n)}}catch(i){}return!1}function kr(n){if(!it){if(st==1){if(n.keyCode==37){rt(NavigationEventType.Click,0);return}if(n.keyCode==39){rt(NavigationEventType.Click,1);return}}if(n.keyCode==27)if(bt)kt(ui,{});else{var t=u(r);t&&pInstr.logEvent(t.ns,"CI.Hide",t.key,"imageviewer",{Component:"escape"},null);history.back()}}}function kt(n,t){var i=_w.parent;i&&i.postMessage&&(t.command=n,i.postMessage(t,"*"))}function hi(){var n=t.gebc("mainImage",i)[0],e,f;n&&(e=parseFloat(t.gs(n,"width")),e&&(f=u(r),pi(f.width,f.height,n)))}function rt(n,t){var i={eventType:n,direction:t,source:"currentimg"};sj_evt.fire(7,i)}function dr(n){n?(i.lastChild&&u(r+1)&&o(i.lastChild)>u(r+1).idx&&t.r(i,i.lastChild),s=0,i.firstChild&&t.hc(i.firstChild,"iol_imc")&&t.rtlsml(i.firstChild,0),f=i.firstChild):(i.firstChild&&u(r-1)&&o(i.firstChild)<u(r-1).idx&&t.r(i,i.firstChild),i.firstChild&&t.hc(i.firstChild,"iol_imc")&&t.rtlsml(i.firstChild,"-100%"),s=-i.clientWidth,f=i.lastChild);var e=ut(r);i.children.length<=1&&tu(e);ci(e);i.lastChild&&!t.hc(i.lastChild,l)&&sj_evt.fire(5);gr(n)}function gr(n){var e=n?u(r-1):u(r+1),f;e&&(f=ut(e.idx),n?(s=-i.clientWidth,t.rtlsml(f,"-100%"),t.ib(i,f,i.firstChild)):t.a(i,f))}function nu(){while(i.firstChild)t.r(i,i.firstChild);var n=ut(r);ci(n);t.rtlsml(n,0);t.a(i,n);f=n;dt()}function ci(n){if(n&&p){var i=p.getCurrentMetaData();i&&i.itb&&t.ac(n,"trans")}}function li(){r<=h?t.ac(k,g):t.rc(k,g);r>=c?t.ac(d,g):t.rc(d,g)}function ai(){for(var n,i=Math.max(r-yt,h),f=Math.min(r+yt,c),t=i;t<f+1;t++)n=u(t),n&&!n[e]&&yi(n)}function vi(n,i){var r,u,f;return t.ac(n,"mainImage"),r=sj_ce("div",null,tr),t.sa(r,"idx",i),u=sj_ce("span"),f=sj_ce("span"),f.appendChild(n),u.appendChild(f),r.appendChild(u),r}function ut(n){var i=u(n);return i?i[e]&&!t.hc(i[e],l)?(t.rtlsml(i[e],0),i[e]):yi(i,!0):null}function yi(n,i){var r,f,u,o;if(n)return(r=null,i&&n[a]&&(f=new Image,f.src=n[a],r=vi(f,n.idx),pi(n.width,n.height,f)),n.ismw)?(r&&t.rc(r,l),r):(!n[e]&&n[pt]&&(u=new Image,u.src=et&&et.imi()?et.gmi():n[pt],u.onload=function(){ru(this,n)},u.onerror=uu,o=vi(u,n.idx),p.insertMainImage(n.idx,o)),i&&n[e]&&(t.sdt(n[e],0),t.a(r,n[e])),r)}function pi(n,r,u){var f=Math.min(1,Math.min(i.clientWidth/n,i.clientHeight/r));t.sw(u,n*f);t.sh(u,r*f)}function tu(n){if(r==ot){ot=-1;return}t.a(i,n);f=n}function wi(){return f?t.gebc("mainImage",f)[0]:null}function bi(){if(f&&!t.hc(f,l)&&f.parentNode){var n=wi();n&&(t.hc(f,vt)?v(n,ii):iu(n))}}function iu(n){ht!=null&&v(n,ht);ct!=null&&v(n,ct);lt!=null&&v(n,lt);at!=null&&v(n,at);v(n,ni)}function v(n,t){n.parentNode.appendChild(t)}function ki(n){if(n.parentNode&&t.hc(n.parentNode,"iol_imc")&&n.parentNode.parentNode){var i=n.parentNode.parentNode;i.replaceChild(n,n.parentNode);o(n)<r&&t.rtlsml(n,"-100%");t.sdt(n,4)}}function ru(n,i){var u=t.gpc(n,"DIV","iol_imc"),e,s;u&&(t.rc(u,l),i&&n.src==i[pt]&&(e=n.naturalWidth||n.width,s=n.naturalHeight||n.height,(e&&i.width!==e||s&&i.height!==s)&&(n.onload=null,n.onerror=null,n.src=i[a],t.ac(u,vt),pInstr.logEvent(i.ns,"CI.Error",i.key,"ImageViewer",{Component:"currentimg",url:i.imgUrl,page:"ImageDetailMainImage",type:"SizeMismatch"},null))),ki(u),o(u)==r&&(o(f)!=r&&(f=u),bi(),sj_evt.fire(5)))}function uu(){var f=this,i=t.gpc(f,"DIV","iol_imc"),e,n;i&&(e=parseInt(t.ga(i,"idx")),n=u(e),n&&n[a]&&(t.ga(f,"src")==n[a]?t.rc(i,l):(f.src=n[a],ki(i)),t.ac(i,vt),pInstr.logEvent(n.ns,"CI.Error",n.key,"ImageViewer",{Component:"currentimg",url:n.imgUrl,page:"ImageDetailMainImage"},null)),o(i)==r&&sj_evt.fire(5))}function fu(n,r){switch(tt){case 0:it||(tt=t.gsd(r.X,r.Y,fr,ur));break;case 1:i.firstChild&&t.rtlsml(i.firstChild,s+r.X);break;case 2:_w.scrollBy(0,-r.Y)}return!0}function eu(n,u,f){if(tt==1){var e=i.clientWidth,o=ou(f,u,e);!o||o&&u.X<0&&r==c||o&&u.X>0&&r==h?i.firstChild&&t.rtlsml(i.firstChild,s):u.X>0?gi(e,0):gi(-e,1)}return tt=0,!0}function ou(n,t,i){return n<250&&Math.abs(t.X)>20||Math.abs(t.X)>i/5}function o(n){var i=t.ga(n,"idx");return i?parseInt(i):-1}function dt(){var u=r-1,n;u>=h&&o(i.firstChild)>u&&(wt=di(u),wt&&(s=-i.clientWidth,t.rtlsml(wt,"-100%")));n=r+1;n<=c&&o(i.lastChild)<n&&(fi=di(n),t.rtlsml(fi,0))}function di(n){var u=ut(n);return u!=null&&(n>r?t.a(i,u):t.ib(i,u,i.firstChild)),u}function gi(n,r){if(i.firstChild){sj_evt.fire(6,!0);t.std(i.firstChild,ei);t.rtlsml(i.firstChild,s+n);var u=sb_st(function(){t.std(i.firstChild,0);r!=null&&rt(NavigationEventType.Swipe,r);u&&(sb_ct(u),u=null);sj_evt.fire(6,!1)},ei)}}function su(){var n=u(r);n&&ft(n,"mainimage","copyicon")}function ft(n,t,i){pInstr.logEvent(n.ns,"CI.Click",n.key,t,{Component:i,Mid:n.mid},null)}function hu(){var n=u(r);n&&pInstr.logEvent(n.ns,"CI.ImageLoad",n.key,"imageviewer",{Component:"currentImg",InstCategory:"ImageSeen",Mid:n.mid},null)}function u(n){var t=null,i;return typeof ImageDetailDataManager!="undefined"&&(i=n<r,t=ImageDetailDataManager.getFullData(n,!1,i)),t}function gt(n,t){return typeof IDConfig!="undefined"&&IDConfig&&IDConfig[n]?IDConfig[n]:t}function w(n){sj_pd(n);sj_sp(n)}var t=pMMUtils,et=typeof MMTestUtils!="undefined"?MMTestUtils:null,r=parseInt(t.qsv("selectedIndex",!0))||0,ot=r,st,y="click",nr="keyup",b,k,d,i,ni,ht,ct,lt,at,ti,ii,ri,f,h=0,c=0,g="iol_navd",tr="iol_imc loading valign_cont",l="loading",vt="loadError",yt,e="mainImg",pt="imgUrl",a="thUrl",ui="close",ir="loaded",p,wt,fi,nt=null,tt=0,s=-1,rr,bt=!1,it=!1,ei=500,ur=gt("sddt",2.5),fr=gt("sddd",10),oi=0;n.init=function(){b=_ge("view_image_main");k=_ge("iol_navl");d=_ge("iol_navr");i=_ge("iol_imw");yt=gt("pfic",0);p=typeof ImageDetailDataManager!="undefined"?ImageDetailDataManager:null;i&&(rr=t.grtlsl(i));ni=_ge("copy");ht=_ge("can_fav");ct=_ge("can_dislike");lt=_ge("visualSearch_button");at=_ge("can_badge");ti=_ge("copy_link");ii=_ge("detail_loadError");ri=_ge("back");f=i?i.firstChild:null;b&&(bt=t.ga(b,"data-defer-back-button-event")=="1");er();p.loadData();st=1;dt();kt(ir,{});sj_evt.fire(12,null);hu()};n.getCurrImg=function(){return wi()};n.NavigateToLink=wr;n.instrumentCopyIconClick=su;n.instrumentClick=ft;n.init()}(ImageDetailMainImage||(ImageDetailMainImage={})),function(){function o(){(n=_ge("miniheader_data"),n)&&(sj_evt.bind(4,e),sj_be(_w,"unload",t),sj_evt.bind("ajax.unload",t),n&&n.lastChild&&f.ga(n.lastChild,"type")=="dls"&&(i=n.lastChild),r=parseInt(f.qsv("selectedIndex",!0))||0)}function t(){sj_evt.unbind(4,e);sj_ue(_w,"unload",t);sj_evt.unbind("ajax.unload",t)}function e(t){var f=t[1],u,e;f==null||r==f.index&&n.childNodes&&n.childNodes.length>0||(r=f.index,u=i,e=s(f.index),e&&n.appendChild(e),i=e,u&&u.parentNode&&u.parentNode.removeChild(u))}function s(n){var t,i;return u&&(t=u.getFullData(n,!0),t!=null&&t.insights!=null&&t.insights.dls)?(i=sj_ce("div"),i.innerHTML=t.insights.dls,i.firstChild):null}var i,u=typeof ImageDetailDataManager!="undefined"?ImageDetailDataManager:null,f=pMMUtils,n,r;o()}(ImageViewerDls||(ImageViewerDls={})),function(){function nt(){(o=_ge("bar_r"),t=_ge("highlights"),r=_ge("switcher"),u=_ge("isb_text"),t&&t.children&&o)&&(s=n.ga(t,"cross-fade"),s&&(h=parseInt(n.ga(t,"width"))),w=n.ga(o,"min-width"),u&&(n.sdt(u,1),l=u.offsetWidth,n.sdt(u,4)),tt())}function tt(){sj_evt.bind(4,k);sj_be(_w,"unload",c);sj_evt.bind("ajax.unload",c);SmartEvent.bind(_w,"resize",it)}function c(){f&&(clearInterval(f),f=null);sj_evt.unbind(4,k);sj_ue(_w,"unload",c);sj_evt.unbind("ajax.unload",c)}function k(n){var t=n[1];y=t.index;d(t.resultData)}function it(){var n=b?b.getFullData(y,!0):null;d(n)}function d(e){var k=!1,y=o.offsetWidth-w,d,p,b,c,g,it,nt,tt;for(u&&l&&(y-=l,y<0?(n.ac(u,i),t&&n.ac(t,i)):(n.rc(u,i),t&&n.rc(t,i),k=!0)),f&&(n.rc(r,v),clearInterval(f),f=null),d=[],p=0,b=0;b<t.children.length;b++)c=t.children[b],g=c.id,g&&(nt=n.ha(c,"data-source"),it=nt?e!=null?e.insights:null:e,ot(c,it,g,!nt)&&(p++,s?y>=h&&(p>1?n.ac(c,i):a=c):(y-=c.offsetWidth,y>=0?k=!0:n.ac(c,i)),tt=c.textContent||c.innerText,tt&&d.push(tt)));s&&(y>=h&&p>0?(n.sw(t,h),rt()):n.sw(t,0));r&&n.sa(r,"title",d.join(" | "));et(k)}function rt(){e=a;f=setInterval(ft,g)}function ut(){if(e)for(var t=e.nextSibling;t;)if(n.ga(t,"is-format"))t=t.nextSibling;else return t;return a}function ft(){if(r&&(n.rc(r,v),n.ac(r,v)),e){n.ac(e,i);var t=ut();t&&n.rc(t,i);e=t}}function et(t){t?n.rc(r,p):n.ac(r,p)}function ot(t,r,u,f){var e;if(r&&r[u]){if(n.ra(t,"is-format"),n.rc(t,i),f)if(n.ha(t,"data-title-format")){var o=n.ga(t,"data-title-format"),s=n.ga(t,"data-title-singular-format"),h=r[u]=="1"?s:o;t.innerHTML=h.replace("{0}","<strong>"+r[u]+"<\/strong>")}else t.firstChild&&(e=t.firstChild,e.innerHTML=r[u]);else t.innerHTML=r[u];return!0}return n.sa(t,"is-format","1"),n.ac(t,i),!1}var n=pMMUtils,t,r,y,p="nohi",w=0,o,b=typeof ImageDetailDataManager!="undefined"?ImageDetailDataManager:null,u,l=0,i="hide",s=Boolean,g=2e3,f=null,e,a,h,v="cross_anim";nt()}(ImageViewerHighlights||(ImageViewerHighlights={})),function(){function f(){sj_evt.bind(1,r);sj_evt.bind(0,u);sj_be(_w,"unload",n);sj_evt.bind("ajax.unload",n)}function r(n){var r=n&&n.length>1?n[1]:null,f,u;r&&t&&(f=r.oldIndex<r.newIndex?"next":"prev",u=t.getFullData(r.newIndex,!1,r.oldIndex>r.newIndex),u&&pInstr.logEvent(u.ns,r.triggerType.name,u.key,"imageviewer",{Component:r.component,InstCategory:"ImageSeen",Mid:u.mid,Direction:f,InsightsStatus:InsightsStatus[i]},null))}function u(n){!n||n.length<2||(i=n[1])}function n(){sj_evt.unbind(1,r);sj_evt.unbind(0,u);sj_ue(_w,"unload",n);sj_evt.unbind("ajax.unload",n)}var t=typeof ImageDetailDataManager!="undefined"?ImageDetailDataManager:null,i=0;f()}(),function(){function c(){n=_ge("att_fi");n&&e&&t&&(s(),sj_evt.bind(1,o),sj_be(_w,"unload",r),sj_evt.bind("ajax.unload",r))}function r(){sj_evt.unbind(1,o);sj_ue(_w,"unload",r);sj_evt.unbind("ajax.unload",r)}function o(n){var t=n&&n.length>1?n[1]:null;t&&s()}function s(){var r=e.getCurrentMetaData(),s=t.ga(n,"href"),c=!1,o,l;r&&s&&s!="#"&&(o=parseQueryParamsFromQuery(s),o.mid=r.mid,o.simid=r.docid,o.vw=r.vw,l=queryParamsToString(o),t.sa(n,"href",l),r.vw&&(c=!0,i&&(sj_ue(n,u,h),t.rc(n,f),i=!1)));c||i||(sj_be(n,u,h),t.ac(n,f),i=!0)}function h(n){sj_pd(n);sj_sp(n)}var u="click",f="disable",i=!1,e=typeof ImageDetailDataManager!="undefined"?ImageDetailDataManager:null,t=typeof pMMUtils!="undefined"?pMMUtils:null,n;c()}(),function(n){function r(n,r,u){if(n&&n.imageUrl&&typeof IVConfig!="undefined"&&IVConfig.fdurl){var f=IVConfig.fdurl.replace("/%IMAGEURL%/",encodeURIComponent(n.imageUrl)).replace("/%SFX%/",(++i).toString());n.imageWidth&&(f+="&imgW="+n.imageWidth);n.imageHeight&&(f+="&imgH="+n.imageHeight);t&&(f=t.atb(f,"faces"));f=addCommonPersistedParams(f);AsyncFetcher.fetch(f,r,u,u)}}var t=typeof MMTestUtils!="undefined"?MMTestUtils:null,i=0;n.fetchFaceFeature=r}(ImageVisionFetcher||(ImageVisionFetcher={})),function(){function it(){(t=_ge("show_face"),h=_ge("iol_imw"),e=_ge("face_error"),r=_ge("show_face_disclaimer"),t&&i&&y&&tt&&f&&c)&&(SmartEvent.bindc(1,o),SmartEvent.bind(_w,"scroll",o),SmartEvent.bind(t,"click",rt),g())}function o(){nt(!1);u();n.rc(t,"loading");g();r&&n.sdt(r,4)}function b(){r&&(s(r),v(r,1500,!1))}function rt(i){var r,u;n.hc(t,"loading")||(ut(),r=l(),r&&(u=n.gebc(p,r),u.length>0?(nt(!0),n.sdt(t,0),b()):(n.ac(t,"loading"),ft())),a("showface"),sj_pd(i),sj_sp(i))}function ut(){h&&sj_be(_w,"click",k);sj_be(_w,"unload",u);sj_evt.bind("ajax.unload",u)}function u(){h&&sj_ue(_w,"click",k);sj_ue(_w,"unload",u);sj_evt.unbind("ajax.unload",u)}function k(t){var r=sj_et(t),u,i,f;r&&(u=n.gpc(r,"SPAN","feature_content")||n.gpc(r,"SPAN","feature"),u?(i=n.ga(u,"href"),i&&(i=i.replace("/%QUERY%/",getCurrentQuery()),_w.open(i)),a("detectedfeature")):(f=n.gpc(r,"DIV",null,"show_face_disclaimer"),f?a("howolddisclaimer"):(o(),sj_pd(t),sj_sp(t))))}function ft(){var n=i.getCurrentMetaData(),t;n&&n.thUrl&&(t={imageUrl:n.thUrl,imageWidth:n.thW,imageHeight:n.thH},ImageVisionFetcher.fetchFaceFeature(t,et,d))}function et(r,u){var f=sj_ce("div"),o,e,h;f.innerHTML="<br>"+r;f.removeChild(f.firstChild);o=n.gebc("image_vision",f);o.length>0?(e=o[0],s(e),n.hc(e,"nofeature")?(h=i.getCurrentMetaData(),h&&(h.fc=0),v(e,3e3,!0)):b(),n.sdt(t,0)):d(u)}function d(n){o();ot(n)}function ot(n){if(e&&(s(e),v(e,3e3,!0)),typeof pInstr!="undefined"){var t=i.getCurrentMetaData();t&&pInstr.logEvent(t.ns,"CI.Error",t.key,"imagevision",{Component:"showface",url:n},null)}}function g(){var r=i.getCurrentMetaData();r&&r.fc!=null&&r.fc>0&&r.width>=c.minw&&r.height>=c.minh&&(s(t),n.sdt(t,4),w?f.cssAnimation(t,""):(n.ac(t,"active"),f.cssAnimation(t,"flash"),w=!0))}function nt(t){var u=l(),r,i;if(u)for(r=n.gebc(p,u),i=0;i<r.length;i++)n.sdt(r[i],t?4:0)}function l(){var n=y.getCurrImg();return n?n.parentNode:null}function s(n){var t=l();t&&t.appendChild(n)}function a(n){if(typeof pInstr!="undefined"){var t=i.getCurrentMetaData();t&&pInstr.logEvent(t.ns,"CI.Click",t.key,"imagevision",{Component:n},null)}}function v(t,i,r){if(t){n.sdt(t,1);n.so(t,1);var u=sb_st(function(){t&&f.fadeOut(t,10,null,function(){n.so(t,"");r&&n.sdt(t,4)});u&&(sb_ct(u),u=null)},i)}}var n=typeof pMMUtils!="undefined"?pMMUtils:null,f=typeof MMAnim!="undefined"?MMAnim:null,i=typeof ImageDetailDataManager!="undefined"?ImageDetailDataManager:null,y=typeof ImageDetailMainImage!="undefined"?ImageDetailMainImage:null,tt=typeof InsightsFetcher!="undefined"?InsightsFetcher:null,h,t,p="image_vision",w=!1,e,c=typeof IVConfig!="undefined"?IVConfig:null,r;it()}(ImageInsightsVision||(ImageInsightsVision={})),function(){function p(){if(t){if(i=n.gebc("canvas_badge",document),i)for(var r=0;r<i.length;r++)f.bind(i[r],y,b);h();f.bindc(1,h);f.bindc(0,k)}}function h(){var f,o,t;if((u(0),r=null,d())&&e!=null&&(f=e.getCurrentMetaData(),f))for(o=!0,t=0;t<i.length;t++){var s=i[t],a=n.ga(s,"data-key"),h=f[a];h&&o?(w(s,h),l(),o=!1):c(s)}}function w(i,f){var e,o,h;r=i;u(2);n.sdt(i,2);e=n.gfbc("icon_text",i);e.hasChildNodes()&&g(e);f>1?(o=n.ga(e,"data-plural"),o=n.sf(o,f),a(e,o)):(h=n.ga(e,"data-singular"),h=n.sf(h,f),a(e,h));s.cssAnimation(t,"");s.cssAnimation(t,"fadeout");nt(t)}function c(t){t&&n.sdt(t,0)}function u(i){n.sdt(t,i);var r=i==0?n.rc:n.ac;r(t,"visible");r(t,"touchhover")}function b(){tt("badge");v.fire(3)}function k(n){r&&(o=n[1],l())}function l(){o===1?(u(0),c(r)):(u(2),n.sdt(r,2))}function a(t,i){if(t){var r=sj_ce("span");n.sih(r,i);t.appendChild(r)}}function d(){var t=n.gfbc("iol_fsst",null);return n.gfbc("badge",t)?!0:!1}function g(n){for(var i=n.childNodes,t=0;t<i.length;t++)n.removeChild(i[t])}function nt(t){t&&!isIEOrEdge&&(n.ss(t,"animation-delay","2s"),n.ss(t,"-webkit-animation-duration","3s"),n.ss(t,"-moz-animation-duration","3s"),n.ss(t,"animation-duration","3s"))}function tt(n){var t=e.getCurrentMetaData();pInstr.logEvent(t.ns,"CI.Click",t.key,"ImageCanvas",{Component:n,Mid:t.mid},null)}var t=_ge("can_badge"),i=[],n=pMMUtils,v=sj_evt,f=SmartEvent,e=ImageDetailDataManager,y="click",r,o=0,s=MMAnim;p()}(),function(){function e(){n=_ge("copy_round_i");t=_ge("copy_tooltip");n&&i.bind(n,"click",s);var r=h();r&&i.bind(r,"mouseenter",o)}function o(){sj_evt.fire(9,t)}function s(n){var i=sj_et(n),t=r.ga(i,"href");t&&(_w.open(t,"_blank"),u());sj_pd(n);sj_sp(n)}function h(){var n=f.getCurrImg();return n?n.parentNode:null}var n,t,i=SmartEvent,r=pMMUtils,u=ImageDetailMainImage.instrumentCopyIconClick,f=typeof ImageDetailMainImage!="undefined"?ImageDetailMainImage:null;e()}(),function(){function e(){r(9,o)}function o(n){var t=n[1];t instanceof HTMLElement&&s(t)}function s(i){var r=n.gfbc(u,i);h(i)&&(n.ac(i,t),n.ac(r,t))}function i(n){return n.getBoundingClientRect()}function h(n){var u=_ge(f),t=i(u),r=i(n);return r.left<t.left||r.right>t.right?!0:!1}var n=pMMUtils,r=SmartEvent.bindc,t="truncated",u="arrow_down",f="iol_imw";e()}(),function(){function ut(){SmartEvent.bindc(4,ft);c=_ge("iol_navl");l=_ge("iol_navr");sj_be(_w,"unload",d);sj_evt.bind("ajax.unload",d);SmartEvent.bindc(DetailPageEvent[8],function(n){n.length>1&&(w=n[1])})}function ft(n){var t,i,r,u;(et(),t=n&&n.length>1?n[1]:null,t&&t.resultData&&t.resultData.insights)&&(i=t.resultData.insights.objrec,i!=null)&&(r=sj_ce("div"),r.innerHTML=i,u=r.firstChild,ot(u),st(u))}function et(){var r,f,u;if(h&&i(),r=t(),r)for(f=n.gebc(it,r),u=0;u<f.length;u++)r.removeChild(f[u])}function ot(n){for(var i,t=0;t<n.childNodes.length;t++)i=n.childNodes[t],y.cssAnimation(i,""),y.cssAnimation(i,"flash"),SmartEvent.bind(i,"click",ht)}function t(){var n=nt.getCurrImg();return n?n.parentNode:null}function st(i){var r=t();i&&r&&(r.appendChild(i),n.ac(i,"touchhover"))}function ht(a){var y,p,k,v,d,g;f||w==1||(y=t(),y&&n.ac(y,"active"),sj_evt.fire(DetailPageEvent[8],1),p=lt(a),k=s(u,a.currentTarget),k?(n.sdt(k,4),b(p)):(v=sj_et(a),v&&v.firstChild&&(d=n.ga(v.firstChild,"data-sid"),g=ct(d),o("CI.Click","objectRecognitionFaceRect"),f=!0,AsyncFetcher.fetch(g,function(n,t){vt(n,t,v,p)},yt))),h=!0,sj_be(_w,"scroll",i),sj_be(_w,"click",i),sj_be(c,"click",e),sj_be(l,"click",e),r(a),sj_sp(a))}function ct(n){var t=g.objRecUrl.replace("%STID%",n).replace("%SFX%",(++rt).toString());return v&&(t=v.atb(t,n)),t}function e(n){a();sj_evt.fire(DetailPageEvent[8],0);sj_ue(c,"click",e);sj_ue(l,"click",e);r(n)}function lt(n){var t=at(n.currentTarget),i=n.clientX-t.x,r=n.clientY-t.y;return[i,r]}function at(n){for(var t=0,i=0;n;)t+=n.offsetLeft-n.scrollLeft+n.clientLeft,i+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return{x:t,y:i}}function b(i){var o=_ge("iol_imw"),e=o.getBoundingClientRect(),r=n.gfbc(u,t()),f;n.spa(r);n.sl(r,i[0]+p);n.st(r,i[1]+p);f=r.getBoundingClientRect();f.bottom>e.bottom&&n.st(r,i[1]-(f.bottom-e.bottom));f.right>e.right&&n.sl(r,i[0]-(f.right-e.right))}function vt(n,t,i,r){if(f=!1,i){sj_appHTML(i,n);var e=s(u,i);e&&(SmartEvent.bind(e,"click",kt),wt(),b(r))}}function yt(){var i=t();i&&n.rc(i,"active");sj_evt.fire(DetailPageEvent[8],0);f=!1;o("CI.Error","ObjectRecognitionEntity")}function k(n){_w.fbsrc="celebrecognition";sj_evt.fire("feedbackformrequested");pt();r(n)}function pt(){var i=t();i&&n.ac(i,"keep_entity")}function wt(){var i=t(),n=s("entity_feedback",i);n&&SmartEvent.bind(n,"click",k)}function bt(){var i=t(),n=s("entity_feedback",i);n&&sj_ue(n,"click",k)}function a(){var r=t(),i=n.gebc(u,r),e,f;if(r&&n.rc(r,"active"),!(i.length<=0))for(e=i.length,f=0;f<e;f++)n.sdt(i[0],0),i[0]&&i[0].parentElement&&i[0].parentElement.removeChild(i[0])}function i(){a();o("CI.Hide","ObjectRecognitionEntity");sj_evt.fire(DetailPageEvent[8],0);h=!1;sj_ue(_w,"scroll",i);sj_ue(_w,"click",i);bt();r(event)}function kt(t){a();sj_evt.fire(DetailPageEvent[8],0);o("CI.Click","objectRecognitionEntity");var i=t.currentTarget,u=n.ga(i,"href");_w.open(u);r(t)}function o(n,t){if(typeof pInstr!="undefined"){var i=tt.getCurrentMetaData();i&&pInstr.logEvent(null,n,null,t,{Mid:i.mid},null)}}function s(t,i){var r=n.gebc(t,i);if(r.length>0)return r[0]}function d(){sj_ue(_w,"scroll",i);sj_ue(_w,"click",i)}function r(n){sj_pd(n);sj_sp(n)}var g=typeof IVConfig!="undefined"?IVConfig:null,n=typeof pMMUtils!="undefined"?pMMUtils:null,v=typeof MMTestUtils!="undefined"?MMTestUtils:null,nt=typeof ImageDetailMainImage!="undefined"?ImageDetailMainImage:null,tt=typeof ImageDetailDataManager!="undefined"?ImageDetailDataManager:null,y=typeof MMAnim!="undefined"?MMAnim:null,it="obj_rec",u="entity_pane",rt=0,f=!1,h=!1,p=5,c,l,w=0;ut()}(),function(){function r(){n?i():t.bindc(12,u)}function u(){n=typeof ImageDetailMainImage!="undefined"?ImageDetailMainImage:null;n&&i()}function i(){t.bindc(11,f)}function f(t){n.NavigateToLink(t[1])}var n=typeof ImageDetailMainImage!="undefined"?ImageDetailMainImage:null,t=SmartEvent;r()}()